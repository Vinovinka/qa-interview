# Базы данных

## Виды баз данных

Реляционные (PostgreSQL, MySQL и SQLite)

Нереляционные 

Документо-ориентированные (MongoDB)

Колоночные (Clickhouse)

## Что такое DML (Data Manipulation Language)

Язык манипуляции данными. 

Примеры: SELECT, INSERT, UPDATE, DELETE

## Что такое DDL (Data Definition Language)

Язык описания данных: 

Примеры: CREATE, ALTER, DROP

## Что такое первичный ключ?

Определенный набор столбцов таблицы, который уникально идентифицирует каждую строку. Первичный ключ может состоять как из одного столбца, так и из нескольких.

## Что такое транзакция?

Последовательность операций (SQL-запросов), которые должны быть выполнены обязательно вместе, причем одновременно.При работе с транзакциями возможны 2 варианта:

- результаты выполнения всех запросов, входящих в транзакцию, будут применены к базе данных

- все внесенные изменения в базу данных будут отменены (откатаны).

### Уровни изоляции транзакций
READ UNCOMMITTED - чтение незафиксированных данных: гарантирует только отсутствие потерянных обновлений

READ COMMITTED - чтение фиксированных данных: обеспечивается защита от чернового, «грязного» чтения, тем не менее, в процессе работы одной транзакции другая может быть успешно завершена и сделанные ею изменения зафиксированы. В итоге первая транзакция будет работать с другим набором данных. 

REPEATABLE READ - повторяемость чтения: читающая транзакция «не видит» изменения данных, которые были ею ранее прочитаны. При этом никакая другая транзакция не может изменять данные, читаемые текущей транзакцией, пока та не окончена

SERIALIZABLE - упорядочиваемость: транзакции полностью изолируются друг от друга, каждая выполняется так, как будто параллельных транзакций не существует

## Что такое агрегатная функция?

Агрегатная функция выполняет вычисление на наборе значений и возвращает одиночное значение.

Примеры: COUNT, SUM, AVG, MIN, MAX

## Что такое триггер?

Хранимая процедура особого типа, которую пользователь не вызывает непосредственно, а исполнение которой обусловлено действием по модификации данных: добавлением INSERT, удалением DELETE строки в заданной таблице, или изменением UPDATE данных в определённом столбце заданной таблицы

## Какой командой можно поменять тип столбца в таблице?

ALTER TABLE... CHANGE... 

## Какие joinы бывают? В чем отличие?

INNER JOIN - оператор внутреннего соединения, симметричный. Каждая строка одной таблицы сопоставляется с каждой строкой второй таблицы, после этого проверяется условие соединения, если оно истинно - объединенная строка помещается в таблицу-результат.

OUTER JOIN - соединение двух таблиц, в результат которого обязательно входят все строки либо одной, либо обеих таблиц. Бывает трех видов:

LEFT OUTER JOIN - оператор не симметричный, важен порядок таблиц. Результат включает inner join таблиц, а также все оставшиеся записи левой таблицы со значениями null на месте значений правой таблицы.

RIGHT OUTER JOIN - оператор не симметричный, важен порядок таблиц. Результат включает inner join таблиц по предикату ( on ), а затем оставшиеся записи правой таблицы со значениями null на месте значений левой таблицы.

FULL OUTER JOIN - оператор симметричный, порядок не важен. Результат включает inner join таблиц по предикату, затем включаются оставшиеся записи первой таблицы со значениями null на месте значений второй таблицы, а также оставшиеся записи второй таблицы со значениями null на месте значений первой таблицы.

CROSS JOIN - оператор перекрестного соединения или декартова произведения. Порядок не важен. В результате каждая строка одной таблицы объединяется с каждой строкой второй таблицы, давая тем самым все возможные сочетания строк.

## Напишите SQL запрос, позволяющий найти сотрудника, имя которого начинается с буквы "K"

SELECT * FROM Employees WHERE FirstName like 'K%';

## Какая разница между COUNT(*) и COUNT(столбец)?

COUNT(*) - количество всех строк в таблице

COUNT(столбец) - количество строк, где значение в "столбце" - not null

## Для чего используется партиционирование/шардирование?

Партиционирование - разбиение больших таблиц на (меньшие) логические части по выбранным критериям (например, заказы по месяцам). Снижает нагрузку на отдельную таблицу, ускоряет поиск и т.д.

Горизонтальное партиционирование (шардирование) - партиционирование, при котором части (шарды) расположены на разных инстансах БД. Снижает нагрузку на БД, повышает отказоустойчивость системы в целом (можем работать с доступными шардами)

## Принцип ACID

Atomicity - атомарность:  гарантирует, что никакая транзакция не будет зафиксирована в системе частично (будут либо выполнены все её подоперации, либо не выполнено ни одной)

Consistency - согласованность: каждая успешная транзакция по определению фиксирует только допустимые результаты

Isolation - изолированность: параллельные транзакции не должны оказывать влияния на её результат

Durability - устойчивость: если пользователь получил подтверждение от системы, что транзакция выполнена, он может быть уверен, что сделанные им изменения не будут отменены из-за какого-либо сбоя

